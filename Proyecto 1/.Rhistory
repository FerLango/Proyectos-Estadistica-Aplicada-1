geom_tile() +
theme(legend.position = "none") +
scale_y_discrete(labels=
substr(unique(sort(victimas$Categoria)),0,20)) +
scale_fill_gradient(low = "yellow", high = "red",
breaks = seq(0,4000,1))
ggplotly(heat)
heat <-
victimas %>%
select(Mes_hecho, Categoria) %>%
filter(!is.na(Mes_hecho), Categoria != "DELITO DE BAJO IMPACTO") %>%
group_by(Mes_hecho, Categoria) %>%
tally() %>%
arrange(Categoria) %>%
ggplot(aes(x=factor(Mes_hecho,
levels = c("Enero","Febrero","Marzo",
"Abril","Mayo","Junio",
"Julio","Agosto","Septiembre",
"Octubre","Noviembre",
"Diciembre")),
y=Categoria, fill=n)) +
geom_tile() +
theme(legend.position = "none") +
scale_y_discrete(labels=
substr(unique(sort(victimas$Categoria)),0,20)) +
scale_fill_gradient(low = "yellow", high = "red")
ggplotly(heat)
heat <-
victimas %>%
select(Mes_hecho, Categoria) %>%
filter(!is.na(Mes_hecho), Categoria != "DELITO DE BAJO IMPACTO") %>%
group_by(Mes_hecho, Categoria) %>%
tally() %>%
arrange(Categoria) %>%
ggplot(aes(x=factor(Mes_hecho,
levels = c("Enero","Febrero","Marzo",
"Abril","Mayo","Junio",
"Julio","Agosto","Septiembre",
"Octubre","Noviembre",
"Diciembre")),
y=Categoria, fill=n)) +
geom_tile() +
theme(legend.position = "none") +
scale_y_discrete(labels=
substr(unique(sort(victimas$Categoria)),0,20)) + scale_fill_viridis(discrete=FALSE)
#scale_fill_gradient(low = "yellow", high = "red")
ggplotly(heat)
heat <-
victimas %>%
select(Mes_hecho, Categoria) %>%
filter(!is.na(Mes_hecho), Categoria != "DELITO DE BAJO IMPACTO") %>%
group_by(Mes_hecho, Categoria) %>%
tally() %>%
arrange(Categoria) %>%
ggplot(aes(x=factor(Mes_hecho,
levels = c("Enero","Febrero","Marzo",
"Abril","Mayo","Junio",
"Julio","Agosto","Septiembre",
"Octubre","Noviembre",
"Diciembre")),
y=Categoria, fill=n)) +
geom_tile() +
theme(legend.position = "none") +
scale_y_discrete(labels=
substr(unique(sort(victimas$Categoria)),0,20)) + scale_fill_viridis(discrete=FALSE) + theme_ipsum()
heat <-
victimas %>%
select(Mes_hecho, Categoria) %>%
filter(!is.na(Mes_hecho), Categoria != "DELITO DE BAJO IMPACTO") %>%
group_by(Mes_hecho, Categoria) %>%
tally() %>%
arrange(Categoria) %>%
ggplot(aes(x=factor(Mes_hecho,
levels = c("Enero","Febrero","Marzo",
"Abril","Mayo","Junio",
"Julio","Agosto","Septiembre",
"Octubre","Noviembre",
"Diciembre")),
y=Categoria, fill=n)) +
geom_tile() +
theme(legend.position = "none") +
scale_y_discrete(labels=
substr(unique(sort(victimas$Categoria)),0,20)) +
scale_fill_gradient(low = "yellow", high = "red")
ggplotly(heat)
victimas %>%
select(Edad) %>%
filter(Edad < 150, Edad>0) %>%
ggplot(aes(x=Edad)) +
geom_density()
dens <-
victimas %>%
select(Edad) %>%
filter(Edad < 150, Edad>0) %>%
ggplot(aes(x=Edad)) +
geom_density()
ggplotly(dens)
dens <-
victimas %>%
select(Edad) %>%
filter(Edad < 150, Edad>0) %>%
ggplot(aes(x=Edad)) +
geom_density(fill="#69b3a2", color="#e9ecef", alpha=0.8)
ggplotly(dens)
dens <-
victimas %>%
select(Edad) %>%
filter(Edad < 150, Edad>0) %>%
ggplot(aes(x=Edad)) +
geom_density(fill="#69b3a2", color="#e9ecef", alpha=0.8, size=10)
ggplotly(dens)
dens <-
victimas %>%
select(Edad) %>%
filter(Edad < 150, Edad>0) %>%
ggplot(aes(x=Edad)) +
geom_density(fill="#69b3a2", color="green", alpha=0.8, size=2)
ggplotly(dens)
dens <-
victimas %>%
select(Edad) %>%
filter(Edad < 150, Edad>0) %>%
ggplot(aes(x=Edad)) +
geom_density(fill="#69b3a2", color="darkgreen", alpha=0.8, size=1)
ggplotly(dens)
?geom_density
ggplotly(heat)
dens <-
victimas %>%
select(Edad) %>%
filter(Edad < 150, Edad>0)
dens <-
victimas %>%
select(Edad) %>%
filter(Edad < 150, Edad>0) %>%
ggplot(aes(x=Edad))
dens <-
victimas %>%
select(Edad) %>%
filter(Edad < 150, Edad>0) %>%
ggplot(aes(x=Edad)) +
geom_density(fill="#69b3a2", color="darkgreen", alpha=0.8, size=1)
ggplotly(dens)
library(tidyverse)
knitr::opts_chunk$set(echo = TRUE, warning = FALSE,
message = FALSE, fig.align = "center",
cache = TRUE)
```{r}
dens <-
victimas %>%
select(Edad) %>%
filter(Edad < 150, Edad>0) %>%
ggplot(aes(x=Edad)) +
geom_density(fill="#69b3a2", color="darkgreen", alpha=0.8, size=1)
library(plotly)
library(tidyverse)
library(lubridate)
library(openxlsx)
library(kableExtra)
library(sf)
library(moments)
library(gganimate)
dens <-
victimas %>%
select(Edad) %>%
filter(Edad < 150, Edad>0) %>%
ggplot(aes(x=Edad)) +
geom_density(fill="#69b3a2", color="darkgreen", alpha=0.8, size=1)
ggplotly(dens)
pie <-
victimas %>%
select(CalidadJuridica) %>%
group_by(CalidadJuridica) %>%
tally()
View(pie)
?tally
pie <-
victimas %>%
select(CalidadJuridica) %>%
group_by(CalidadJuridica) %>%
tally() %>%
filter(!is.na(n)) %>%
plot_ly(labels = ~CalidadJuridica, values = ~n, type = 'pie')
pie
pie <-
victimas %>%
select(CalidadJuridica) %>%
group_by(CalidadJuridica) %>%
tally() %>%
filter(!is.na(n))
View(pie)
pie <-
victimas %>%
select(CalidadJuridica) %>%
group_by(CalidadJuridica) %>%
tally() %>%
na.omit()
View(pie)
pie <-
victimas %>%
select(CalidadJuridica) %>%
group_by(CalidadJuridica) %>%
tally() %>%
na.omit() %>%
plot_ly(labels = ~CalidadJuridica, values = ~n, type = 'pie')
pie
str(victimas)
library(gridExtra)
pie1 <-
victimas %>%
select(CalidadJuridica) %>%
group_by(CalidadJuridica) %>%
tally() %>%
na.omit() %>%
plot_ly(labels = ~CalidadJuridica, values = ~n, type = 'pie')
pie2 <-
victimas %>%
select(competencia) %>%
group_by(competencia) %>%
tally() %>%
na.omit() %>%
plot_ly(labels = ~competencia, values = ~n, type = 'pie')
grid.arrange(pie1, pie2, ncol=1)
grid.arrange(pie1, pie2, ncol=1)
pie1 <-
victimas %>%
select(CalidadJuridica) %>%
group_by(CalidadJuridica) %>%
tally() %>%
na.omit() %>%
plot_ly(labels = ~CalidadJuridica, values = ~n, type = 'pie')
pie1
pie2 <-
victimas %>%
select(competencia) %>%
group_by(competencia) %>%
tally() %>%
na.omit() %>%
plot_ly(labels = ~competencia, values = ~n, type = 'pie')
pie2
pie3 <-
victimas %>%
select(TipoPersona) %>%
group_by(TipoPersona) %>%
tally() %>%
na.omit() %>%
plot_ly(labels = ~TipoPersona, values = ~n, type = 'pie')
pie3
pie4 <-
victimas %>%
select(Sexo) %>%
group_by(Sexo) %>%
tally() %>%
na.omit() %>%
plot_ly(labels = ~Sexo, values = ~n, type = 'pie')
pie4
subplot(pie1,pie2,pie3,pie4,nrows = 2)
subplot(pie1,pie2,pie3,pie4,nrows = 2)
install.packages("wordcloud2")
library(wordcloud2)
victimas %>%
select(Delito) %>%
group_by(Delito) %>%
tally() %>%
na.omit() %>%
wordcloud2()
victimas %>%
select(Delito) %>%
group_by(Delito) %>%
tally() %>%
na.omit() %>%
wordcloud2(size=1.6)
victimas %>%
select(Delito) %>%
group_by(Delito) %>%
tally() %>%
na.omit() %>%
wordcloud2(size=1.6, color='random-dark')
victimas %>%
select(Delito) %>%
group_by(Delito) %>%
tally() %>%
na.omit() %>%
wordcloud2(size=1.6, color='random-light')
victimas %>%
select(Delito) %>%
group_by(Delito) %>%
tally() %>%
na.omit() %>%
wordcloud2(size=1.6, color='random-light',
minRotation = -pi/6,
maxRotation = -pi/6,
rotateRatio = 1)
victimas %>%
select(Delito) %>%
group_by(Delito) %>%
tally() %>%
na.omit() %>%
wordcloud2(size=1.6, color='random-light')
victimas %>%
select(Delito) %>%
group_by(Delito) %>%
tally() %>%
na.omit() %>%
wordcloud2(size=.5, color='random-light')
victimas %>%
select(Delito) %>%
group_by(Delito) %>%
tally() %>%
na.omit() %>%
wordcloud2(size=.5, color='random-dark')
victimas %>%
select(Delito) %>%
group_by(Delito) %>%
tally() %>%
na.omit() %>%
wordcloud2(size=.1, color='random-dark')
victimas %>%
select(Delito) %>%
group_by(Delito) %>%
tally() %>%
na.omit() %>%
wordcloud2(size=5, color='random-dark')
victimas %>%
select(Delito) %>%
group_by(Delito) %>%
tally() %>%
na.omit() %>%
wordcloud2(size=10, color='random-dark')
victimas %>%
select(Delito) %>%
group_by(Delito) %>%
tally() %>%
na.omit() %>%
wordcloud2(size=10, color='random-dark', backgroundColor="black")
victimas %>%
select(Delito) %>%
group_by(Delito) %>%
tally() %>%
na.omit() %>%
wordcloud2(size=10, color='random-light', backgroundColor="black")
victimas %>%
select(Delito) %>%
group_by(Delito) %>%
tally() %>%
na.omit() %>%
wordcloud2(size=10, color='random-light',
backgroundColor="#189c54")
victimas %>%
select(Delito) %>%
group_by(Delito) %>%
tally() %>%
na.omit() %>%
wordcloud2(size=10, color='random-dark',
backgroundColor="#189c54")
victimas %>%
select(Delito) %>%
group_by(Delito) %>%
tally() %>%
na.omit() %>%
wordcloud2(size=10, color='random-dark',
backgroundColor="#189c54", shape = "circle")
victimas %>%
select(Delito) %>%
group_by(Delito) %>%
tally() %>%
na.omit() %>%
wordcloud2(size=3, color='random-light',
backgroundColor="#189c54", shape = "circle")
install.packages("fmsb")
victimas %>%
select(Delito) %>%
group_by(Delito) %>%
tally() %>%
na.omit() %>%
wordcloud2(size=3, color='random-light',
backgroundColor="white", shape = "circle")
victimas %>%
select(Delito) %>%
group_by(Delito) %>%
tally() %>%
na.omit() %>%
wordcloud2(size=3, color='random-dark',
backgroundColor="white", shape = "circle")
# Create data: note in High school for Jonathan:
data <- as.data.frame(matrix( sample( 2:20 , 10 , replace=T) , ncol=10))
colnames(data) <- c("math" , "english" , "biology" , "music" , "R-coding", "data-viz" , "french" , "physic", "statistic", "sport" )
# To use the fmsb package, I have to add 2 lines to the dataframe: the max and min of each topic to show on the plot!
data <- rbind(rep(20,10) , rep(0,10) , data)
# Check your data, it has to look like this!
# head(data)
data
View(data)
victimas %>%
select(Categoria, Sexo) %>%
group_by(Categoria, Sexo) %>%
tally() %>%
na.omit() %>%
table(Categoria, Sexo)
radar <-
victimas %>%
select(Categoria, Sexo) %>%
group_by(Categoria, Sexo) %>%
tally() %>%
na.omit()
table(radar$Categoria, radar$Sexo)
table(radar$Categoria, radar$Sexo, radar$n)
head(wday(victimas$FechaHecho))
victimas %>%
select(wday(FechaHecho, label = TRUE)) %>%
group_by(FechaHecho) %>%
tally() %>%
na.omit()
loli <-
select(wday(victimas$FechaHecho, label = TRUE)) %>%
group_by(FechaHecho) %>%
tally() %>%
na.omit()
loli <-
wday(victimas$FechaHecho, label = TRUE) %>%
group_by(FechaHecho) %>%
tally() %>%
na.omit()
loli <-
wday(victimas$FechaHecho, label = TRUE)
head(loli)
loli <-
wday(victimas$FechaHecho, label = TRUE) %>%
tally()
loli <-
as.character(wday(victimas$FechaHecho, label = TRUE))
head(loli)
?wday
as.character(wday(victimas$FechaHecho, label = TRUE))
as.character(wday(victimas$FechaHecho, label = TRUE,
abbr = FALSE))
loli <-
data.frame(dia = as.character(wday(victimas$FechaHecho,
label = TRUE, abbr = FALSE)))
View(loli)
loli <-
data.frame(dia = as.character(wday(victimas$FechaHecho,
label = TRUE, abbr = FALSE))) %>%
group_by(dia) %>%
tally()
View(loli)
loli <-
data.frame(dia = as.character(wday(victimas$FechaHecho,
label = TRUE, abbr = FALSE))) %>%
group_by(dia) %>%
tally() %>%
na.omit()
View(loli)
loli <-
data.frame(dia = as.character(wday(victimas$FechaHecho,
label = TRUE, abbr = FALSE))) %>%
group_by(dia) %>%
tally() %>%
na.omit() %>%
mutate(dia = factor(dia))
View(loli)
ggplot(aes(x=dia, y=n)) +
geom_segment()
loli <-
data.frame(dia = as.character(wday(victimas$FechaHecho,
label = TRUE, abbr = FALSE))) %>%
group_by(dia) %>%
tally() %>%
na.omit() %>%
ggplot(aes(x=dia, y=n)) +
geom_segment()
loli
loli <-
data.frame(dia = as.character(wday(victimas$FechaHecho,
label = TRUE, abbr = FALSE))) %>%
group_by(dia) %>%
tally() %>%
na.omit() %>%
ggplot(aes(x=dia, y=n)) +
geom_segment(aes(xend=dia, yend=0))
loli
loli <-
data.frame(dia = as.character(wday(victimas$FechaHecho,
label = TRUE, abbr = FALSE))) %>%
group_by(dia) %>%
tally() %>%
na.omit() %>%
ggplot(aes(x=dia, y=n)) +
geom_segment(aes(xend=dia, yend=0)) +
geom_point(size=4, color= "#189c54")
loli <-
data.frame(dia = as.character(wday(victimas$FechaHecho,
label = TRUE, abbr = FALSE))) %>%
group_by(dia) %>%
tally() %>%
na.omit() %>%
ggplot(aes(x=dia, y=n)) +
geom_segment(aes(xend=dia, yend=0)) +
geom_point(size=4, color= "#189c54")
loli
loli <-
data.frame(dia = as.character(wday(victimas$FechaHecho,
label = TRUE, abbr = FALSE))) %>%
group_by(dia) %>%
tally() %>%
na.omit() %>%
ggplot(aes(x=dia, y=n)) +
geom_segment(aes(xend=dia, yend=0)) +
geom_point(size=4, color= "#189c54") +
theme_bw()
loli
ggplotly(loli)
